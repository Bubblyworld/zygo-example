# Zygo Example App

A very simple app to illustrate [zygo](github.com/Bubblyworld/zygo)  usage. Things are a little hacky at the moment as the server side of the project is not yet implemented.

## Installation

Clone both the [zygo](github.com/Bubblyworld/zygo) and [zygo-example](github.com/Bubblyworld/zygo-example) repos:

``` sh
$ git clone git@github.com:Bubblyworld/zygo.git
$ git clone git@github.com:Bubblyworld/zygo-example.git
```

Head into the [zygo-example](github.com/Bubblyworld/zygo-example) directory and symlink [zygo](github.com/Bubblyworld/zygo) into the public directory:
``` sh
$ cd zygo-example/public
$ ln -s ../../zygo
```

Install the dependencies, and serve the public folder with a server of your choice:
``` sh
$ jspm install
$ http_server
```

If you don't already have [JSPM](github.com/jspm/jspm-cli) installed, you can get it with:
``` sh
$ npm install -g jspm
```

## How It Works

Open the `index.html` file and you will notice a few things:

<br />

``` html
<script src="jspm_packages/system.js"></script>
<script src="config.js"></script>
```
This is where we include the [System.js](githubb.com/systemjs/systemjs)loader and the [JSPM](github.com/jspm/jspm-cli) config file. This tells [System.js](githubb.com/systemjs/systemjs) where to find our application files.

<br />

``` html
<div id="__zygo-body-container__"/>
```
This is the container div that [zygo](github.com/Bubblyworld/zygo) renders the app to.

<br />

``` html
<script>
System.import('zygo/lib/zygo-client').then(function(zygo) {
  zygo._setInitialState({
    route: {}
  });

  zygo._setRoutes({
    '/one': 'lib/one-handler',
    '/two': 'lib/two-handler'
  });

  zygo.route('/one');
});
</script>
```
This script loads the [zygo](github.com/Bubblyworld/zygo) client, and proceeds to initialise the state and routes. The browser is then pointed to the `/one` route. For more information on the router format and other details, see [zygo](github.com/Bubblyworld/zygo).

Note that the handler files are specified with their [JSPM](github.com/jspm/jspm-cli) module paths.

# The Handlers
``` javascript
export default function(state) {
  return Promise.resolve().then(function() {
    return {
      component: 'lib/one.jsx!',
      title: 'Page One'
    };
  });
}
```
The handlers are very simple - they just return a promise that resolves to their respective component and page title. Note the use of `jsx!` in the [JSPM](github.com/jspm/jspm-cli) path, telling the [System.js](githubb.com/systemjs/systemjs) loader to use the jsx plugin to load the component.

# The Components
``` javascript
import React from 'react';
import Page from './page.jsx!';
import 'lib/one.css!';

import * as zygo from 'zygo/lib/zygo-client';

export default React.createClass({
  render: function() {
    return (
      <Page>
        <div className="one disable-select" onClick={this.clickHandler}>
          One.
        </div>
      </Page>
    );
  },

  clickHandler: function() {
    zygo.route('/two');
  }
});
```
The components are similarly simple. They simple export a react class to be rendered when the route is active. The stylesheet for the class is imported using the [System.js](githubb.com/systemjs/systemjs) css plugin.

# Issues

There is no server side rendering going on here. This will come in time, as soon as it is implemented in [zygo](github.com/Bubblyworld/zygo). when this happens, the above html template will be automatically generated by the server, and the initial configuration will be moved to server config files, hopefully cleaning up the example significantly.
